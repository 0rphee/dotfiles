"use strict";var Yo=Object.create;var Ie=Object.defineProperty;var Jo=Object.getOwnPropertyDescriptor;var Qo=Object.getOwnPropertyNames;var Zo=Object.getPrototypeOf,en=Object.prototype.hasOwnProperty;var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),tn=(e,t)=>{for(var r in t)Ie(e,r,{get:t[r],enumerable:!0})},Rt=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Qo(t))!en.call(e,n)&&n!==r&&Ie(e,n,{get:()=>t[n],enumerable:!(o=Jo(t,n))||o.enumerable});return e};var N=(e,t,r)=>(r=e!=null?Yo(Zo(e)):{},Rt(t||!e||!e.__esModule?Ie(r,"default",{value:e,enumerable:!0}):r,e)),rn=e=>Rt(Ie({},"__esModule",{value:!0}),e);var Mt=S((hs,Vt)=>{Vt.exports=Ut;Ut.sync=ln;var Ft=require("fs");function cn(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var o=0;o<r.length;o++){var n=r[o].toLowerCase();if(n&&e.substr(-n.length).toLowerCase()===n)return!0}return!1}function Gt(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:cn(t,r)}function Ut(e,t,r){Ft.stat(e,function(o,n){r(o,o?!1:Gt(n,e,t))})}function ln(e,t){return Gt(Ft.statSync(e),e,t)}});var Wt=S((gs,Ht)=>{Ht.exports=Dt;Dt.sync=un;var Bt=require("fs");function Dt(e,t,r){Bt.stat(e,function(o,n){r(o,o?!1:$t(n,t))})}function un(e,t){return $t(Bt.statSync(e),t)}function $t(e,t){return e.isFile()&&dn(e,t)}function dn(e,t){var r=e.mode,o=e.uid,n=e.gid,i=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),s=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),l=parseInt("010",8),c=parseInt("001",8),u=a|l,p=r&c||r&l&&n===s||r&a&&o===i||r&u&&i===0;return p}});var Kt=S((ys,jt)=>{var ws=require("fs"),ve;process.platform==="win32"||global.TESTING_WINDOWS?ve=Mt():ve=Wt();jt.exports=Xe;Xe.sync=pn;function Xe(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(o,n){Xe(e,t||{},function(i,s){i?n(i):o(s)})})}ve(e,t||{},function(o,n){o&&(o.code==="EACCES"||t&&t.ignoreErrors)&&(o=null,n=!1),r(o,n)})}function pn(e,t){try{return ve.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var Zt=S((Ss,Qt)=>{var oe=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",qt=require("path"),mn=oe?";":":",zt=Kt(),Xt=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),Yt=(e,t)=>{let r=t.colon||mn,o=e.match(/\//)||oe&&e.match(/\\/)?[""]:[...oe?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],n=oe?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=oe?n.split(r):[""];return oe&&e.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:o,pathExt:i,pathExtExe:n}},Jt=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:o,pathExt:n,pathExtExe:i}=Yt(e,t),s=[],a=c=>new Promise((u,p)=>{if(c===o.length)return t.all&&s.length?u(s):p(Xt(e));let m=o[c],w=/^".*"$/.test(m)?m.slice(1,-1):m,b=qt.join(w,e),E=!w&&/^\.[\\\/]/.test(e)?e.slice(0,2)+b:b;u(l(E,c,0))}),l=(c,u,p)=>new Promise((m,w)=>{if(p===n.length)return m(a(u+1));let b=n[p];zt(c+b,{pathExt:i},(E,R)=>{if(!E&&R)if(t.all)s.push(c+b);else return m(c+b);return m(l(c,u,p+1))})});return r?a(0).then(c=>r(null,c),r):a(0)},fn=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:o,pathExtExe:n}=Yt(e,t),i=[];for(let s=0;s<r.length;s++){let a=r[s],l=/^".*"$/.test(a)?a.slice(1,-1):a,c=qt.join(l,e),u=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+c:c;for(let p=0;p<o.length;p++){let m=u+o[p];try{if(zt.sync(m,{pathExt:n}))if(t.all)i.push(m);else return m}catch{}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw Xt(e)};Qt.exports=Jt;Jt.sync=fn});var tr=S((Ps,Ye)=>{"use strict";var er=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(o=>o.toUpperCase()==="PATH")||"Path"};Ye.exports=er;Ye.exports.default=er});var ir=S((xs,nr)=>{"use strict";var rr=require("path"),hn=Zt(),gn=tr();function or(e,t){let r=e.options.env||process.env,o=process.cwd(),n=e.options.cwd!=null,i=n&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch{}let s;try{s=hn.sync(e.command,{path:r[gn({env:r})],pathExt:t?rr.delimiter:void 0})}catch{}finally{i&&process.chdir(o)}return s&&(s=rr.resolve(n?e.options.cwd:"",s)),s}function wn(e){return or(e)||or(e,!0)}nr.exports=wn});var sr=S((bs,Qe)=>{"use strict";var Je=/([()\][%!^"`<>&|;, *?])/g;function yn(e){return e=e.replace(Je,"^$1"),e}function Sn(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(Je,"^$1"),t&&(e=e.replace(Je,"^$1")),e}Qe.exports.command=yn;Qe.exports.argument=Sn});var cr=S((Cs,ar)=>{"use strict";ar.exports=/^#!(.*)/});var ur=S((Es,lr)=>{"use strict";var Pn=cr();lr.exports=(e="")=>{let t=e.match(Pn);if(!t)return null;let[r,o]=t[0].replace(/#! ?/,"").split(" "),n=r.split("/").pop();return n==="env"?o:o?`${n} ${o}`:n}});var pr=S((Is,dr)=>{"use strict";var Ze=require("fs"),xn=ur();function bn(e){let r=Buffer.alloc(150),o;try{o=Ze.openSync(e,"r"),Ze.readSync(o,r,0,150,0),Ze.closeSync(o)}catch{}return xn(r.toString())}dr.exports=bn});var gr=S((As,hr)=>{"use strict";var Cn=require("path"),mr=ir(),fr=sr(),En=pr(),In=process.platform==="win32",An=/\.(?:com|exe)$/i,vn=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Tn(e){e.file=mr(e);let t=e.file&&En(e.file);return t?(e.args.unshift(e.file),e.command=t,mr(e)):e.file}function Rn(e){if(!In)return e;let t=Tn(e),r=!An.test(t);if(e.options.forceShell||r){let o=vn.test(t);e.command=Cn.normalize(e.command),e.command=fr.command(e.command),e.args=e.args.map(i=>fr.argument(i,o));let n=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${n}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function On(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let o={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?o:Rn(o)}hr.exports=On});var Sr=S((vs,yr)=>{"use strict";var et=process.platform==="win32";function tt(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function kn(e,t){if(!et)return;let r=e.emit;e.emit=function(o,n){if(o==="exit"){let i=wr(n,t,"spawn");if(i)return r.call(e,"error",i)}return r.apply(e,arguments)}}function wr(e,t){return et&&e===1&&!t.file?tt(t.original,"spawn"):null}function Ln(e,t){return et&&e===1&&!t.file?tt(t.original,"spawnSync"):null}yr.exports={hookChildProcess:kn,verifyENOENT:wr,verifyENOENTSync:Ln,notFoundError:tt}});var br=S((Ts,ne)=>{"use strict";var Pr=require("child_process"),rt=gr(),ot=Sr();function xr(e,t,r){let o=rt(e,t,r),n=Pr.spawn(o.command,o.args,o.options);return ot.hookChildProcess(n,o),n}function _n(e,t,r){let o=rt(e,t,r),n=Pr.spawnSync(o.command,o.args,o.options);return n.error=n.error||ot.verifyENOENTSync(n.status,o),n}ne.exports=xr;ne.exports.spawn=xr;ne.exports.sync=_n;ne.exports._parse=rt;ne.exports._enoent=ot});var Fr=S((qs,ke)=>{ke.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&ke.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&ke.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Br=S((zs,ce)=>{var h=global.process,Q=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};Q(h)?(Gr=require("assert"),se=Fr(),Ur=/^win/i.test(h.platform),ye=require("events"),typeof ye!="function"&&(ye=ye.EventEmitter),h.__signal_exit_emitter__?P=h.__signal_exit_emitter__:(P=h.__signal_exit_emitter__=new ye,P.count=0,P.emitted={}),P.infinite||(P.setMaxListeners(1/0),P.infinite=!0),ce.exports=function(e,t){if(!Q(global.process))return function(){};Gr.equal(typeof e,"function","a callback must be provided for exit handler"),ae===!1&&ct();var r="exit";t&&t.alwaysLast&&(r="afterexit");var o=function(){P.removeListener(r,e),P.listeners("exit").length===0&&P.listeners("afterexit").length===0&&Le()};return P.on(r,e),o},Le=function(){!ae||!Q(global.process)||(ae=!1,se.forEach(function(t){try{h.removeListener(t,_e[t])}catch{}}),h.emit=Ne,h.reallyExit=lt,P.count-=1)},ce.exports.unload=Le,Z=function(t,r,o){P.emitted[t]||(P.emitted[t]=!0,P.emit(t,r,o))},_e={},se.forEach(function(e){_e[e]=function(){if(!!Q(global.process)){var r=h.listeners(e);r.length===P.count&&(Le(),Z("exit",null,e),Z("afterexit",null,e),Ur&&e==="SIGHUP"&&(e="SIGINT"),h.kill(h.pid,e))}}}),ce.exports.signals=function(){return se},ae=!1,ct=function(){ae||!Q(global.process)||(ae=!0,P.count+=1,se=se.filter(function(t){try{return h.on(t,_e[t]),!0}catch{return!1}}),h.emit=Mr,h.reallyExit=Vr)},ce.exports.load=ct,lt=h.reallyExit,Vr=function(t){!Q(global.process)||(h.exitCode=t||0,Z("exit",h.exitCode,null),Z("afterexit",h.exitCode,null),lt.call(h,h.exitCode))},Ne=h.emit,Mr=function(t,r){if(t==="exit"&&Q(global.process)){r!==void 0&&(h.exitCode=r);var o=Ne.apply(this,arguments);return Z("exit",h.exitCode,null),Z("afterexit",h.exitCode,null),o}else return Ne.apply(this,arguments)}):ce.exports=function(){return function(){}};var Gr,se,Ur,ye,P,Le,Z,_e,ae,ct,lt,Vr,Ne,Mr});var Yr=S((Js,Xr)=>{"use strict";var{PassThrough:oi}=require("stream");Xr.exports=e=>{e={...e};let{array:t}=e,{encoding:r}=e,o=r==="buffer",n=!1;t?n=!(r||o):r=r||"utf8",o&&(r=null);let i=new oi({objectMode:n});r&&i.setEncoding(r);let s=0,a=[];return i.on("data",l=>{a.push(l),n?s=a.length:s+=l.length}),i.getBufferedValue=()=>t?a:o?Buffer.concat(a,s):a.join(""),i.getBufferedLength=()=>s,i}});var Jr=S((Qs,Se)=>{"use strict";var{constants:ni}=require("buffer"),ii=require("stream"),{promisify:si}=require("util"),ai=Yr(),ci=si(ii.pipeline),Fe=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function ut(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:r}=t,o=ai(t);return await new Promise((n,i)=>{let s=a=>{a&&o.getBufferedLength()<=ni.MAX_LENGTH&&(a.bufferedData=o.getBufferedValue()),i(a)};(async()=>{try{await ci(e,o),n()}catch(a){s(a)}})(),o.on("data",()=>{o.getBufferedLength()>r&&s(new Fe)})}),o.getBufferedValue()}Se.exports=ut;Se.exports.buffer=(e,t)=>ut(e,{...t,encoding:"buffer"});Se.exports.array=(e,t)=>ut(e,{...t,array:!0});Se.exports.MaxBufferError=Fe});var Zr=S((Zs,Qr)=>{"use strict";var{PassThrough:li}=require("stream");Qr.exports=function(){var e=[],t=new li({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=o,t.on("unpipe",n),Array.prototype.slice.call(arguments).forEach(r),t;function r(i){return Array.isArray(i)?(i.forEach(r),this):(e.push(i),i.once("end",n.bind(null,i)),i.once("error",t.emit.bind(t,"error")),i.pipe(t,{end:!1}),this)}function o(){return e.length==0}function n(i){e=e.filter(function(s){return s!==i}),!e.length&&t.readable&&t.end()}}});var ss={};tn(ss,{default:()=>is});module.exports=rn(ss);var X=require("@raycast/api");var re=require("@raycast/api"),Nt=require("react");var J=require("@raycast/api"),he=require("react/jsx-runtime"),Ot="```",kt="https://bitwarden.com/help/cli/#download-and-install",on="https://formulae.brew.sh/formula/bitwarden-cli",nn="https://github.com/raycast/extensions/issues/new?assignees=&labels=extension%2Cbug&template=extension_bug_report.yml&title=%5BBitwarden%5D+...",sn=e=>`# \u{1F6A8} Something went wrong
${e?`${Ot}
${e}
${Ot}`:`
`}
## Troubleshooting Guide:

1. The [Bitwarden CLI](${kt}) is correctly installed
2. If you did not install the Bitwarden CLI [using Homebrew](${on}), please check that the path of the installation matches the \`Bitwarden CLI Installation Path\` extension setting. 
    - \u{1F4A1} Run the \`which bw\` command to check the CLI installation path.

If you are still experiencing issues, please [open an issue on GitHub](${nn}).
`,an=e=>(0,he.jsx)(J.Detail,{markdown:sn(e.errorInfo),actions:(0,he.jsxs)(J.ActionPanel,{children:[(0,he.jsx)(J.Action.CopyToClipboard,{title:"Copy Homebrew Installation Command",content:"brew install bitwarden-cli"}),(0,he.jsx)(J.Action.OpenInBrowser,{title:"Open Installation Guide",url:kt})]})}),qe=an;var Lt="https://bitwarden.com",I={PASSWORD_OPTIONS:"bw-generate-password-options",PASSWORD_ONE_TIME_WARNING:"bw-generate-password-warning-accepted",SESSION_TOKEN:"sessionToken",REPROMPT_HASH:"sessionRepromptHash",SERVER_URL:"cliServer",LAST_ACTIVITY_TIME:"lastActivityTime",VAULT_LOCK_REASON:"vaultLockReason"},ze={CLINotFound:"CLINotFound"};var _t=require("react/jsx-runtime"),ge=class extends Nt.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t,r){t.name in ze?(this.setState(o=>({...o,hasError:!0,error:t.message})),(0,re.showToast)(re.Toast.Style.Failure,t.message)):(re.environment.isDevelopment&&this.setState(o=>({...o,hasError:!0,error:t.message})),console.error("Error:",t,r))}render(){try{return this.state.hasError?(0,_t.jsx)(qe,{errorInfo:this.state.error}):this.props.children}catch{return(0,_t.jsx)(qe,{})}}},Ae=class extends Error{constructor(t){super(t),this.name=ze.CLINotFound}};var H=require("@raycast/api");var x=require("@raycast/api"),V=require("react");var f=require("@raycast/api"),be=require("react");var So=require("@raycast/api"),j=require("react");var C=require("@raycast/api");var co=require("node:buffer"),lo=N(require("node:path"),1),gt=N(require("node:child_process"),1),Pe=N(require("node:process"),1),uo=N(br(),1);function nt(e){let t=typeof e=="string"?`
`:`
`.charCodeAt(),r=typeof e=="string"?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===r&&(e=e.slice(0,-1)),e}var we=N(require("node:process"),1),ie=N(require("node:path"),1),Cr=N(require("node:url"),1);function Te(e={}){let{env:t=process.env,platform:r=process.platform}=e;return r!=="win32"?"PATH":Object.keys(t).reverse().find(o=>o.toUpperCase()==="PATH")||"Path"}function Nn(e={}){let{cwd:t=we.default.cwd(),path:r=we.default.env[Te()],execPath:o=we.default.execPath}=e,n,i=t instanceof URL?Cr.default.fileURLToPath(t):t,s=ie.default.resolve(i),a=[];for(;n!==s;)a.push(ie.default.join(s,"node_modules/.bin")),n=s,s=ie.default.resolve(s,"..");return a.push(ie.default.resolve(i,o,"..")),[...a,r].join(ie.default.delimiter)}function Er({env:e=we.default.env,...t}={}){e={...e};let r=Te({env:e});return t.path=e[r],e[r]=Nn(t),e}var Fn=(e,t,r,o)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let n=Object.getOwnPropertyDescriptor(e,r),i=Object.getOwnPropertyDescriptor(t,r);!Gn(n,i)&&o||Object.defineProperty(e,r,i)},Gn=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},Un=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},Vn=(e,t)=>`/* Wrapped ${e}*/
${t}`,Mn=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Bn=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Dn=(e,t,r)=>{let o=r===""?"":`with ${r.trim()}() `,n=Vn.bind(null,o,t.toString());Object.defineProperty(n,"name",Bn),Object.defineProperty(e,"toString",{...Mn,value:n})};function it(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:o}=e;for(let n of Reflect.ownKeys(t))Fn(e,t,n,r);return Un(e,t),Dn(e,t,o),e}var Re=new WeakMap,Ir=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,o=0,n=e.displayName||e.name||"<anonymous>",i=function(...s){if(Re.set(i,++o),o===1)r=e.apply(this,s),e=null;else if(t.throw===!0)throw new Error(`Function \`${n}\` can only be called once`);return r};return it(i,e),Re.set(i,o),i};Ir.callCount=e=>{if(!Re.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return Re.get(e)};var Ar=Ir;var Lr=require("node:os");var vr=function(){let e=Rr-Tr+1;return Array.from({length:e},$n)},$n=function(e,t){return{name:`SIGRT${t+1}`,number:Tr+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Tr=34,Rr=64;var kr=require("node:os");var Or=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var st=function(){let e=vr();return[...Or,...e].map(Hn)},Hn=function({name:e,number:t,description:r,action:o,forced:n=!1,standard:i}){let{signals:{[e]:s}}=kr.constants,a=s!==void 0;return{name:e,number:a?s:t,description:r,supported:a,action:o,forced:n,standard:i}};var Wn=function(){let e=st();return Object.fromEntries(e.map(jn))},jn=function({name:e,number:t,description:r,supported:o,action:n,forced:i,standard:s}){return[e,{name:e,number:t,description:r,supported:o,action:n,forced:i,standard:s}]},_r=Wn(),Kn=function(){let e=st(),t=64+1,r=Array.from({length:t},(o,n)=>qn(n,e));return Object.assign({},...r)},qn=function(e,t){let r=zn(e,t);if(r===void 0)return{};let{name:o,description:n,supported:i,action:s,forced:a,standard:l}=r;return{[e]:{name:o,number:e,description:n,supported:i,action:s,forced:a,standard:l}}},zn=function(e,t){let r=t.find(({name:o})=>Lr.constants.signals[o]===e);return r!==void 0?r:t.find(o=>o.number===e)},$s=Kn();var Xn=({timedOut:e,timeout:t,errorCode:r,signal:o,signalDescription:n,exitCode:i,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:o!==void 0?`was killed with ${o} (${n})`:i!==void 0?`failed with exit code ${i}`:"failed",at=({stdout:e,stderr:t,all:r,error:o,signal:n,exitCode:i,command:s,escapedCommand:a,timedOut:l,isCanceled:c,killed:u,parsed:{options:{timeout:p}}})=>{i=i===null?void 0:i,n=n===null?void 0:n;let m=n===void 0?void 0:_r[n].description,w=o&&o.code,E=`Command ${Xn({timedOut:l,timeout:p,errorCode:w,signal:n,signalDescription:m,exitCode:i,isCanceled:c})}: ${s}`,R=Object.prototype.toString.call(o)==="[object Error]",d=R?`${E}
${o.message}`:E,g=[d,t,e].filter(Boolean).join(`
`);return R?(o.originalMessage=o.message,o.message=g):o=new Error(g),o.shortMessage=d,o.command=s,o.escapedCommand=a,o.exitCode=i,o.signal=n,o.signalDescription=m,o.stdout=e,o.stderr=t,r!==void 0&&(o.all=r),"bufferedData"in o&&delete o.bufferedData,o.failed=!0,o.timedOut=Boolean(l),o.isCanceled=c,o.killed=u&&!l,o};var Oe=["stdin","stdout","stderr"],Yn=e=>Oe.some(t=>e[t]!==void 0),Nr=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return Oe.map(o=>e[o]);if(Yn(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Oe.map(o=>`\`${o}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let r=Math.max(t.length,Oe.length);return Array.from({length:r},(o,n)=>t[n])};var Dr=N(require("node:os"),1),$r=N(Br(),1),Jn=1e3*5,Hr=(e,t="SIGTERM",r={})=>{let o=e(t);return Qn(e,t,r,o),o},Qn=(e,t,r,o)=>{if(!Zn(t,r,o))return;let n=ti(r),i=setTimeout(()=>{e("SIGKILL")},n);i.unref&&i.unref()},Zn=(e,{forceKillAfterTimeout:t},r)=>ei(e)&&t!==!1&&r,ei=e=>e===Dr.default.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",ti=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Jn;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},Wr=(e,t)=>{e.kill()&&(t.isCanceled=!0)},ri=(e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},jr=(e,{timeout:t,killSignal:r="SIGTERM"},o)=>{if(t===0||t===void 0)return o;let n,i=new Promise((a,l)=>{n=setTimeout(()=>{ri(e,r,l)},t)}),s=o.finally(()=>{clearTimeout(n)});return Promise.race([i,s])},Kr=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},qr=async(e,{cleanup:t,detached:r},o)=>{if(!t||r)return o;let n=(0,$r.default)(()=>{e.kill()});return o.finally(()=>{n()})};function zr(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}var mt=N(Jr(),1),eo=N(Zr(),1),to=(e,t)=>{t!==void 0&&(zr(t)?t.pipe(e.stdin):e.stdin.end(t))},ro=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let r=(0,eo.default)();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},dt=async(e,t)=>{if(!(!e||t===void 0)){e.destroy();try{return await t}catch(r){return r.bufferedData}}},pt=(e,{encoding:t,buffer:r,maxBuffer:o})=>{if(!(!e||!r))return t?(0,mt.default)(e,{encoding:t,maxBuffer:o}):mt.default.buffer(e,{maxBuffer:o})},oo=async({stdout:e,stderr:t,all:r},{encoding:o,buffer:n,maxBuffer:i},s)=>{let a=pt(e,{encoding:o,buffer:n,maxBuffer:i}),l=pt(t,{encoding:o,buffer:n,maxBuffer:i}),c=pt(r,{encoding:o,buffer:n,maxBuffer:i*2});try{return await Promise.all([s,a,l,c])}catch(u){return Promise.all([{error:u,signal:u.signal,timedOut:u.timedOut},dt(e,a),dt(t,l),dt(r,c)])}};var ui=(async()=>{})().constructor.prototype,di=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(ui,e)]),ft=(e,t)=>{for(let[r,o]of di){let n=typeof t=="function"?(...i)=>Reflect.apply(o.value,t(),i):o.value.bind(t);Reflect.defineProperty(e,r,{...o,value:n})}return e},no=e=>new Promise((t,r)=>{e.on("exit",(o,n)=>{t({exitCode:o,signal:n})}),e.on("error",o=>{r(o)}),e.stdin&&e.stdin.on("error",o=>{r(o)})});var io=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],pi=/^[\w.-]+$/,mi=/"/g,fi=e=>typeof e!="string"||pi.test(e)?e:`"${e.replace(mi,'\\"')}"`,so=(e,t)=>io(e,t).join(" "),ao=(e,t)=>io(e,t).map(r=>fi(r)).join(" ");var hi=1e3*1e3*100,gi=({env:e,extendEnv:t,preferLocal:r,localDir:o,execPath:n})=>{let i=t?{...Pe.default.env,...e}:e;return r?Er({env:i,cwd:o,execPath:n}):i},wi=(e,t,r={})=>{let o=uo.default._parse(e,t,r);return e=o.command,t=o.args,r=o.options,r={maxBuffer:hi,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||Pe.default.cwd(),execPath:Pe.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=gi(r),r.stdio=Nr(r),Pe.default.platform==="win32"&&lo.default.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:r,parsed:o}},ht=(e,t,r)=>typeof t!="string"&&!co.Buffer.isBuffer(t)?r===void 0?void 0:"":e.stripFinalNewline?nt(t):t;function po(e,t,r){let o=wi(e,t,r),n=so(e,t),i=ao(e,t);Kr(o.options);let s;try{s=gt.default.spawn(o.file,o.args,o.options)}catch(w){let b=new gt.default.ChildProcess,E=Promise.reject(at({error:w,stdout:"",stderr:"",all:"",command:n,escapedCommand:i,parsed:o,timedOut:!1,isCanceled:!1,killed:!1}));return ft(b,E)}let a=no(s),l=jr(s,o.options,a),c=qr(s,o.options,l),u={isCanceled:!1};s.kill=Hr.bind(null,s.kill.bind(s)),s.cancel=Wr.bind(null,s,u);let m=Ar(async()=>{let[{error:w,exitCode:b,signal:E,timedOut:R},d,g,O]=await oo(s,o.options,c),Y=ht(o.options,d),W=ht(o.options,g),fe=ht(o.options,O);if(w||b!==0||E!==null){let Ee=at({error:w,exitCode:b,signal:E,stdout:Y,stderr:W,all:fe,command:n,escapedCommand:i,parsed:o,timedOut:R,isCanceled:u.isCanceled||(o.options.signal?o.options.signal.aborted:!1),killed:s.killed});if(!o.options.reject)return Ee;throw Ee}return{command:n,escapedCommand:i,exitCode:0,stdout:Y,stderr:W,all:fe,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return to(s,o.options.input),s.all=ro(s,o.options),ft(s,m)}var go=require("fs"),wo=require("path/posix");var yi=require("@raycast/api"),fo=require("crypto");var mo="foobarbazzybaz";function ho(e){return Object.entries(e).flatMap(([t,r])=>r?[`--${t}`,r]:[])}async function Ge(e){return new Promise((t,r)=>{(0,fo.pbkdf2)(e,mo,1e5,64,"sha512",(o,n)=>{if(o!=null){r(o);return}t(n.toString("hex"))})})}var xe=require("@raycast/api");function Ue(){let{serverUrl:e}=(0,xe.getPreferenceValues)();return e===""||e==="bitwarden.com"||e==="https://bitwarden.com"?"":e}var Si={search:"transientCopySearch","generate-password":"transientCopyGeneratePassword","generate-password-quick":"transientCopyGeneratePasswordQuick"};function T(e){let t=Si[xe.environment.commandName],r=(0,xe.getPreferenceValues)()[t];return r==="never"?!1:r==="always"?!0:r==="passwords"?e==="password":!0}var Ve=class{constructor(){let{cliPath:t,clientId:r,clientSecret:o,serverCertsPath:n}=(0,C.getPreferenceValues)(),i=Ue();if(this.cliPath=t||(process.arch=="arm64"?"/opt/homebrew/bin/bw":"/usr/local/bin/bw"),!(0,go.existsSync)(this.cliPath))throw new Ae(`Bitwarden CLI not found at ${this.cliPath}`);this.env={BITWARDENCLI_APPDATA_DIR:C.environment.supportPath,BW_CLIENTSECRET:o.trim(),BW_CLIENTID:r.trim(),PATH:(0,wo.dirname)(process.execPath),...i&&n?{NODE_EXTRA_CA_CERTS:n}:{}},this.initPromise=(async()=>{await this.checkServerUrl(i),this.lockReason=await C.LocalStorage.getItem(I.VAULT_LOCK_REASON)})()}async initialize(){return await this.initPromise,this}async checkServerUrl(t){if((await C.LocalStorage.getItem(I.SERVER_URL)||"")===t)return;let o=await(0,C.showToast)({style:C.Toast.Style.Animated,title:"Switching server...",message:"Bitwarden server preference changed"});try{try{await this.logout()}catch{}await this.exec(["config","server",t||Lt]),await C.LocalStorage.setItem(I.SERVER_URL,t),o.style=C.Toast.Style.Success,o.title="Success",o.message="Bitwarden server changed"}catch(n){o.style=C.Toast.Style.Failure,o.title="Failed to switch server",n instanceof Error?o.message=n.message:o.message="Unknown error occurred"}}async setLockReason(t){this.lockReason=t,await C.LocalStorage.setItem(I.VAULT_LOCK_REASON,t)}async clearLockReason(){this.lockReason&&(await C.LocalStorage.removeItem(I.VAULT_LOCK_REASON),this.lockReason=void 0)}async exec(t,r){let{abortController:o,input:n="",skipLastActivityUpdate:i=!1}=r??{},s=await po(this.cliPath,t,{env:this.env,input:n,signal:o?.signal});return i||await C.LocalStorage.setItem(I.LAST_ACTIVITY_TIME,new Date().toISOString()),s}async sync(t){await this.exec(["sync","--session",t])}async login(){await this.exec(["login","--apikey"]),await this.clearLockReason()}async logout(){await this.exec(["logout"])}async listItems(t){let{stdout:r}=await this.exec(["list","items","--session",t]);return JSON.parse(r).filter(n=>!!n.name)}async listFolders(t){let{stdout:r}=await this.exec(["list","folders","--session",t]);return JSON.parse(r)}async getTotp(t,r){let{stdout:o}=await this.exec(["get","totp","--session",r,t]);return o}async unlock(t){let{stdout:r}=await this.exec(["unlock",t,"--raw"]);return await this.clearLockReason(),r}async lock(t){t&&this.setLockReason(t),await this.exec(["lock"])}async status(t){let{stdout:r}=await this.exec(t==null?["status"]:["status","--session",t]);return JSON.parse(r)}async generatePassword(t,r){let o=t?ho(t):[],{stdout:n}=await this.exec(["generate",...o],{abortController:r});return n}};var yo=require("react/jsx-runtime"),Po=(0,j.createContext)(null),xo=e=>{let{children:t}=e,[r,o]=(0,j.useState)();return(0,j.useEffect)(()=>{new Ve().initialize().then(o)},[]),r?(0,yo.jsx)(Po.Provider,{value:r,children:t}):(0,yo.jsx)(So.Detail,{isLoading:!0})},G=()=>{let e=(0,j.useContext)(Po);if(e==null)throw new Error("useBitwarden must be used within a BitwardenProvider");return e};function bo(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Co(e,t){try{let r=e,o;return r?.stderr?o=r.stderr:e instanceof Error?o=`${e.name}: ${e.message}`:bo(e)?o=JSON.stringify(e):o=`${e}`,o?t?.omitSensitiveValue?Pi(o,t.omitSensitiveValue):o:""}catch{return""}}function Pi(e,t){return e.replace(new RegExp(t,"i"),"[REDACTED]")}var U=require("@raycast/api"),Me=require("react");function xi(){let e=G(),[t,r]=(0,Me.useState)(null);(0,Me.useEffect)(()=>{e.status().then(s=>{r(s)})},[]);let o=!!Ue(),n="...",i="...";if(t){let{status:s,userEmail:a,serverUrl:l}=t;n=s=="unauthenticated"?"\u274C Logged out":`\u{1F512} Locked (${a})`,l?i=l||"":(!l&&o||l&&!o)&&(0,U.confirmAlert)({icon:U.Icon.ExclamationMark,title:"Restart Required",message:"Bitwarden server URL preference has been changed since the extension was opened.",primaryAction:{title:"Close Extension"},dismissAction:{title:"Close Raycast",style:U.Alert.ActionStyle.Cancel}}).then(c=>{c?(0,U.popToRoot)():(0,U.closeMainWindow)()})}return{userMessage:n,serverMessage:i,shouldShowServer:o}}var Eo=xi;var $=require("react/jsx-runtime"),bi=e=>{let{onUnlock:t}=e,r=G(),[o,n]=(0,be.useState)(!1),{userMessage:i,serverMessage:s,shouldShowServer:a}=Eo(),l=(0,be.useRef)(r.lockReason).current,[c,u]=(0,be.useState)(void 0);async function p({password:w}){if(w.length===0)return;let b=await(0,f.showToast)(f.Toast.Style.Animated,"Unlocking Vault...","Please wait");try{if(n(!0),u(void 0),(await r.status()).status=="unauthenticated")try{await r.login()}catch(g){let{displayableError:O,treatedError:Y}=Io(g,w);await(0,f.showToast)(f.Toast.Style.Failure,"Failed to log in",O??`Please check your ${a?"Server URL, ":""}API Key and Secret.`),u(Y);return}let R=await r.unlock(w),d=await Ge(w);t(R,d),await b.hide()}catch(E){let{displayableError:R,treatedError:d}=Io(E,w);await(0,f.showToast)(f.Toast.Style.Failure,"Failed to unlock vault",R??"Please check your credentials"),u(d)}finally{n(!1)}}let m=async()=>{!c||(await f.Clipboard.copy(c),await(0,f.showToast)(f.Toast.Style.Success,"Error copied to clipboard"))};return(0,$.jsxs)(f.Form,{actions:(0,$.jsxs)(f.ActionPanel,{children:[!o&&(0,$.jsx)(f.Action.SubmitForm,{icon:f.Icon.LockUnlocked,title:"Unlock",onSubmit:p,shortcut:{key:"enter",modifiers:[]}}),!!c&&(0,$.jsx)(f.Action,{onAction:m,title:"Copy Last Error",icon:f.Icon.Bug,style:f.Action.Style.Destructive})]}),children:[a&&(0,$.jsx)(f.Form.Description,{title:"Server URL",text:s}),(0,$.jsx)(f.Form.Description,{title:"Vault Status",text:i}),l&&(0,$.jsx)(f.Form.Description,{title:"Reason",text:l}),(0,$.jsx)(f.Form.PasswordField,{autoFocus:!0,id:"password",title:"Master Password"})]})};function Io(e,t){let r=Co(e,{omitSensitiveValue:t}),o;return/Invalid master password/i.test(r)?o="Invalid master password":/Invalid API Key/i.test(r)&&(o="Invalid Client ID or Secret"),{displayableError:o,treatedError:r}}var Ao=bi;var wt=require("react/jsx-runtime"),vo=(0,V.createContext)(null),Ci={token:void 0,isLoading:!0,isLocked:!1,isAuthenticated:!1,passwordHash:void 0,lastActivityTime:void 0},le=class extends Error{constructor(t){super(t),this.name="ShouldLockVaultError"}};function To(e){let{unlock:t,children:r}=e,o=G(),[n,i]=(0,V.useReducer)((d,g)=>({...d,...g}),Ci),s=!n.isLoading&&n.isAuthenticated&&!n.isLocked;(0,V.useEffect)(()=>{a()},[o]);async function a(){try{let d=+(0,x.getPreferenceValues)().repromptIgnoreDuration,[g,O,Y]=await Promise.all([x.LocalStorage.getItem(I.SESSION_TOKEN),x.LocalStorage.getItem(I.REPROMPT_HASH),x.LocalStorage.getItem(I.LAST_ACTIVITY_TIME)]),W;if(!g||!O)throw new le;if(Y&&d>=0){let fe="Vault timed out due to inactivity";if(d===0)throw new le(fe);W=new Date(Y);let Ee=W?Date.now()-W.getTime():0;if(W!=null&&Ee>=d)throw new le(fe)}await c({token:g,passwordHash:O,lastActivityTime:W})}catch(d){let g=d instanceof le?d.message:void 0,{status:O}=await o.status();await p(),O!=="unauthenticated"&&await o.lock(g)}}async function l(d,g){if(g==null)return"unauthenticated";try{return await d.listItems(g??""),"unlocked"}catch{return"locked"}}async function c(d){let g={...d};if("token"in d){let O=await l(o,d.token);g={...d,isLoading:!1,isLocked:O==="locked"||O==="unauthenticated",isAuthenticated:O!=="unauthenticated"}}i(g)}async function u(d,g){await Promise.all([x.LocalStorage.setItem(I.SESSION_TOKEN,d),x.LocalStorage.setItem(I.REPROMPT_HASH,g)]),await c({token:d,passwordHash:g})}async function p(){await Promise.all([x.LocalStorage.removeItem(I.SESSION_TOKEN),x.LocalStorage.removeItem(I.REPROMPT_HASH)]),await c({token:void 0,passwordHash:void 0})}async function m(){let d=await(0,x.showToast)({title:"Locking Vault...",style:x.Toast.Style.Animated});await o.lock("Manually locked by the user"),await p(),await d.hide()}async function w(){let d=await(0,x.showToast)({title:"Logging Out...",style:x.Toast.Style.Animated});await o.logout(),await p(),await d.hide()}async function b(d){return await Ge(d)===n.passwordHash}let E=(0,V.useMemo)(()=>({token:n.token,isLoading:n.isLoading,isAuthenticated:n.isAuthenticated,isLocked:n.isLocked,active:s,lock:m,logout:w,confirmMasterPassword:b}),[n,s,m,w,b]);if(n.isLoading)return(0,wt.jsx)(x.Detail,{isLoading:!0});let R=n.isLocked||!n.isAuthenticated;return(0,wt.jsx)(vo.Provider,{value:E,children:R&&t?(0,wt.jsx)(Ao,{onUnlock:u}):n.token?r:null})}function K(){let e=(0,V.useContext)(vo);if(e==null)throw new Error("useSession must be used within a SessionProvider");return e}var ee=require("@raycast/api"),M=require("react");var Ai=require("react/jsx-runtime"),Ro=(0,M.createContext)(null),Ei={items:[],folders:[],isLoading:!0,isLocked:!1},Oo=({children:e})=>{let t=K(),r=G(),[o,n]=(0,M.useReducer)((u,p)=>({...u,...p}),Ei),i=o.items.length==0,s=t.isLoading||o.isLoading;(0,M.useEffect)(()=>{!t.active||(t.token?a(t.token):n({isLocked:!0}))},[t.token,t.active]);async function a(u){try{let[p,m]=await Promise.all([r.listFolders(u),r.listItems(u)]);m.sort(Ii),n({isLoading:!1,items:m,folders:p})}catch{(0,ee.showToast)(ee.Toast.Style.Failure,"Failed to load vault.")}}async function l(){if(t.token){let u=await(0,ee.showToast)(ee.Toast.Style.Animated,"Syncing Items...");try{await r.sync(t.token),await a(t.token),await u.hide()}catch{await t.logout(),u.style=ee.Toast.Style.Failure,u.message="Failed to sync. Please try logging in again."}}}let c=(0,M.useMemo)(()=>({...o,isEmpty:i,isLoading:s,syncItems:l}),[o,i,s,l]);return(0,Ai.jsx)(Ro.Provider,{value:c,children:e})};function Ii(e,t){return e.favorite&&t.favorite?0:e.favorite?-1:1}var Be=()=>{let e=(0,M.useContext)(Ro);if(e==null)throw new Error("useVault must be used within a VaultProvider");return e};var te=require("react/jsx-runtime");function vi(){let e=Be(),t=K(),r=()=>t.lock("Manually locked by the user");return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(H.Action,{title:"Sync Vault",shortcut:{modifiers:["cmd"],key:"r"},icon:H.Icon.ArrowClockwise,onAction:e.syncItems}),(0,te.jsx)(H.Action,{icon:{source:"sf_symbols_lock.svg",tintColor:H.Color.PrimaryText},title:"Lock Vault",shortcut:{modifiers:["cmd","shift"],key:"l"},onAction:r}),(0,te.jsx)(H.Action,{title:"Logout",icon:H.Icon.XMarkCircle,onAction:t.logout})]})}var Ce=vi;var v=require("@raycast/api"),zo=require("react");var z=require("@raycast/api");var ko=require("react"),yt=require("react/jsx-runtime"),Ti=e=>{let t=ko.Children.toArray(e.children);return e.reverse&&t.reverse(),(0,yt.jsx)(yt.Fragment,{children:t})},Lo=Ti;var De=require("react"),_o=(0,De.createContext)(null),y=()=>{let e=(0,De.useContext)(_o);if(e==null)throw new Error("useSelectVaultItem must be used within a VaultItemContext.Provider");return e},No=_o;var pe=require("@raycast/api");var Uo=require("@raycast/api");var de=require("@raycast/api");var q=require("@raycast/api"),ue=require("react/jsx-runtime"),Ri=e=>{let{description:t,onConfirm:r}=e;async function o(n){r(n.password)}return(0,ue.jsxs)(q.Form,{navigationTitle:"Confirmation Required",actions:(0,ue.jsx)(q.ActionPanel,{children:(0,ue.jsx)(q.Action.SubmitForm,{title:"Confirm",onSubmit:o,shortcut:{key:"enter",modifiers:[]}})}),children:[(0,ue.jsx)(q.Form.Description,{title:"Confirmation Required for",text:t}),(0,ue.jsx)(q.Form.PasswordField,{autoFocus:!0,id:"password",title:"Master Password"})]})},Fo=Ri;var ki=require("react/jsx-runtime");function Oi(e,t){let{description:r="Performing an action that requires the master password"}=t??{},o=K(),{push:n,pop:i}=(0,de.useNavigation)();async function s(a){if(!await o.confirmMasterPassword(a)){await(0,de.showToast)(de.Toast.Style.Failure,"Failed to unlock vault","Check your credentials");return}i(),setTimeout(e,1)}return()=>n((0,ki.jsx)(Fo,{description:r,onConfirm:s}))}var Go=Oi;var _i=require("react/jsx-runtime");function Li(e){let{repromptDescription:t,onAction:r,...o}=e,{reprompt:n}=y(),i=Go(r,{description:t});return(0,_i.jsx)(Uo.Action,{...o,onAction:n?i:r})}var k=Li;var Fi=require("react/jsx-runtime");function Ni(){let{login:e,name:t}=y(),r=e?.password;if(!r)return null;let o=async()=>{await pe.Clipboard.copy(r,{transient:T("password")}),await(0,pe.showHUD)("Copied password to clipboard")};return(0,Fi.jsx)(k,{title:"Copy Password",icon:pe.Icon.Key,onAction:o,repromptDescription:`Copying the password of <${t}>`})}var St=Ni;var $e=require("@raycast/api");var Ui=require("react/jsx-runtime");function Gi(){let{login:e,name:t}=y(),r=e?.password;if(!r)return null;let o=async()=>{await $e.Clipboard.paste(r)};return(0,Ui.jsx)(k,{title:"Paste Password",icon:$e.Icon.Key,onAction:o,repromptDescription:`Pasting the password of <${t}>`})}var Pt=Gi;var L=require("@raycast/api");var Mi=require("react/jsx-runtime");function Vi(){let{id:e,name:t,login:r}=y(),o=G(),n=K();if(!r?.totp)return null;let s=async()=>{if(n.token){let a=await(0,L.showToast)(L.Toast.Style.Success,"Copying TOTP Code..."),l=await o.getTotp(e,n.token);await L.Clipboard.copy(l,{transient:T("other")}),await a.hide(),await(0,L.closeMainWindow)({clearRootSearch:!0})}else(0,L.showToast)(L.Toast.Style.Failure,"Failed to fetch TOTP.")};return(0,Mi.jsx)(k,{title:"Copy TOTP",icon:L.Icon.Clipboard,onAction:s,shortcut:{modifiers:["cmd"],key:"t"},repromptDescription:`Copying the TOTP of <${t}>`})}var xt=Vi;var B=require("@raycast/api");var Vo=e=>e.charAt(0).toUpperCase()+e.slice(1);function Mo(e){return"```\n"+e+"\n```"}var He=require("react/jsx-runtime");function Bi(){let{notes:e,name:t}=y(),{push:r}=(0,B.useNavigation)();if(!e)return null;let o=()=>{r((0,He.jsx)(B.Detail,{markdown:Mo(e),actions:(0,He.jsx)(B.ActionPanel,{children:(0,He.jsx)(B.Action.CopyToClipboard,{title:"Copy Secure Note",content:e,transient:T("other")})})}))};return(0,He.jsx)(k,{title:"Show Secure Note",icon:B.Icon.BlankDocument,onAction:o,repromptDescription:`Showing the note of <${t}>`})}var bt=Bi;var We=require("@raycast/api");var $i=require("react/jsx-runtime");function Di(){let{login:e}=y(),t=e?.username;return t?(0,$i.jsx)(We.Action.CopyToClipboard,{title:"Copy Username",icon:We.Icon.Person,content:t,shortcut:{modifiers:["cmd"],key:"u"},transient:T("other")}):null}var Ct=Di;var F=require("@raycast/api");var me=require("react/jsx-runtime");function Hi(){let{login:e,notes:t,card:r,identity:o,fields:n,name:i}=y(),s=Object.fromEntries(n?.map(c=>[c.name,c.value])||[]),a=Object.fromEntries(e?.uris?.filter(c=>c.uri).map((c,u)=>[`URI ${u+1}`,c.uri])||[]),l=c=>async()=>{await F.Clipboard.copy(c,{transient:T("other")}),await(0,F.showHUD)("Copied to Clipboard"),await(0,F.closeMainWindow)()};return(0,me.jsxs)(me.Fragment,{children:[Object.entries(a).map(([c,u],p)=>u?(0,me.jsx)(F.Action.CopyToClipboard,{title:`Copy ${c}`,icon:F.Icon.Clipboard,content:u,transient:T("other")},`${p}-${c}`):null),Object.entries({notes:t,...r,...o,...s}).map(([c,u],p)=>{if(!u)return null;let m=Vo(c);return(0,me.jsx)(k,{title:`Copy ${m}`,icon:F.Icon.Clipboard,onAction:l(u),repromptDescription:`Copying the ${m} of <${i}>`},`${p}-${c}`)})]})}var Et=Hi;var je=require("@raycast/api");var ji=require("react/jsx-runtime");function Wi(){let{login:e}=y(),t=e?.uris?.[0]?.uri;return t?(0,ji.jsx)(je.Action.OpenInBrowser,{title:"Open in Browser",url:t,icon:je.Icon.Globe,shortcut:{modifiers:["cmd"],key:"o"}}):null}var It=Wi;var D=require("@raycast/api");var Ki={1:"01 - January",2:"02 - February",3:"03 - March",4:"04 - April",5:"05 - May",6:"06 - June",7:"07 - July",8:"08 - August",9:"09 - September",10:"10 - October",11:"11 - November",12:"12 - December"},qi={expMonth:e=>Ki[e]},Bo={cardholderName:"Cardholder name",number:"Number",code:"Security code (CVV)",expMonth:"Expiration month",expYear:"Expiration year",brand:"Brand"},Do=(e,t)=>qi[e]?.(t)??t;function $o(e){return`# \u{1F4B3} Card Details
---
${Object.entries(e).map(([t,r])=>r?`- **${Bo[t]}**: ${Do(t,r)}`:null).join(`
`)}
`}function Ho(e){return Object.entries(e).map(([t,r])=>r?`${Bo[t]}: ${Do(t,r)}`:null).filter(Boolean).join(`
`)}var Ke=require("react/jsx-runtime");function zi(){let{push:e}=(0,D.useNavigation)(),{card:t,name:r}=y();if(!t)return null;let o=()=>{e((0,Ke.jsx)(D.Detail,{markdown:$o(t),actions:(0,Ke.jsx)(D.ActionPanel,{children:(0,Ke.jsx)(D.Action.CopyToClipboard,{title:"Copy Card Details",content:Ho(t),transient:T("other")})})}))};return(0,Ke.jsx)(k,{title:"Show Card Details",icon:D.Icon.CreditCard,onAction:o,repromptDescription:`Showing the card details of <${r}>`})}var At=zi;var A=require("react/jsx-runtime"),{primaryAction:Xi}=(0,z.getPreferenceValues)(),Yi=()=>{let{login:e,card:t}=y();return(0,A.jsxs)(z.ActionPanel,{children:[!!e&&(0,A.jsxs)(z.ActionPanel.Section,{children:[(0,A.jsxs)(Lo,{reverse:Xi==="copy",children:[(0,A.jsx)(Pt,{}),(0,A.jsx)(St,{})]}),(0,A.jsx)(xt,{}),(0,A.jsx)(Ct,{}),(0,A.jsx)(It,{})]}),!!t&&(0,A.jsxs)(z.ActionPanel.Section,{children:[(0,A.jsx)(At,{}),(0,A.jsx)(bt,{})]}),(0,A.jsx)(z.ActionPanel.Section,{children:(0,A.jsx)(Et,{})}),(0,A.jsx)(z.ActionPanel.Section,{children:(0,A.jsx)(Ce,{})})]})},Wo=Yi;var jo=require("@raycast/api"),vt=require("url");function Ko(e){let t=[e.name];if(e.card){let{brand:o,number:n}=e.card;if(t.push(o),n!==null){let i=/^3[47]/.test(n);t.push(n.substring(n.length-(i?5:4),n.length))}}if(t.push(e.login?.username),e.login?.uris){for(let o of e.login.uris)if(o.uri!==null)try{t.push(...new vt.URL(o.uri).hostname.split("."))}catch{}}return[...new Set(t.filter(o=>!!o))]}function qo(e){try{return`https://icons.bitwarden.net/${new vt.URL(e).hostname}/icon.png`}catch{return jo.Icon.Globe}}var Tt=require("react/jsx-runtime"),{fetchFavicons:Ji}=(0,v.getPreferenceValues)(),Qi=e=>{let{item:t,folder:r}=e,o=(0,zo.useMemo)(()=>Ko(t),[t]);return(0,Tt.jsx)(No.Provider,{value:t,children:(0,Tt.jsx)(v.List.Item,{id:t.id,title:t.name,keywords:o,accessories:ts(t,r),icon:es(t),subtitle:t.login?.username||void 0,actions:(0,Tt.jsx)(Wo,{})})})},Zi={1:v.Icon.Globe,2:v.Icon.BlankDocument,3:v.Icon.List,4:v.Icon.Person};function es(e){let t=e.login?.uris?.[0]?.uri;return Ji&&t?qo(t):Zi[e.type]}function ts(e,t){let r=[];return t?.id&&r.push({icon:{source:v.Icon.Folder,tintColor:v.Color.SecondaryText},tooltip:"Folder",text:t.name}),e.favorite&&r.push({icon:{source:v.Icon.Star,tintColor:v.Color.Yellow},tooltip:"Favorite"}),r}var Xo=Qi;var _=require("react/jsx-runtime"),rs=()=>(0,_.jsx)(ge,{children:(0,_.jsx)(xo,{children:(0,_.jsx)(To,{unlock:!0,children:(0,_.jsx)(Oo,{children:(0,_.jsx)(os,{})})})})});function os(){let{items:e,folders:t,isLoading:r,isEmpty:o}=Be();return(0,_.jsxs)(X.List,{isLoading:r,children:[e.map(n=>(0,_.jsx)(Xo,{item:n,folder:ns(t,n)},n.id)),r?(0,_.jsx)(X.List.EmptyView,{icon:X.Icon.ArrowClockwise,title:"Loading...",description:"Please wait."}):(0,_.jsx)(X.List.EmptyView,{icon:{source:"bitwarden-64.png"},title:o?"Vault empty.":"No matching items found.",description:o?"Hit the sync button to sync your vault or try logging in again.":"Hit the sync button to sync your vault.",actions:!r&&(0,_.jsx)(X.ActionPanel,{children:(0,_.jsx)(Ce,{})})})]})}function ns(e,t){return e.find(r=>r.id===t.folderId)}var is=rs;0&&(module.exports={});
