"use strict";var jr=Object.create;var Ie=Object.defineProperty;var zr=Object.getOwnPropertyDescriptor;var Xr=Object.getOwnPropertyNames;var Yr=Object.getPrototypeOf,Jr=Object.prototype.hasOwnProperty;var y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Qr=(e,t)=>{for(var o in t)Ie(e,o,{get:t[o],enumerable:!0})},Rt=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Xr(t))!Jr.call(e,n)&&n!==o&&Ie(e,n,{get:()=>t[n],enumerable:!(r=zr(t,n))||r.enumerable});return e};var L=(e,t,o)=>(o=e!=null?jr(Yr(e)):{},Rt(t||!e||!e.__esModule?Ie(o,"default",{value:e,enumerable:!0}):o,e)),Zr=e=>Rt(Ie({},"__esModule",{value:!0}),e);var Vt=y((ds,Mt)=>{Mt.exports=Ut;Ut.sync=sn;var Ft=require("fs");function nn(e,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var r=0;r<o.length;r++){var n=o[r].toLowerCase();if(n&&e.substr(-n.length).toLowerCase()===n)return!0}return!1}function Gt(e,t,o){return!e.isSymbolicLink()&&!e.isFile()?!1:nn(t,o)}function Ut(e,t,o){Ft.stat(e,function(r,n){o(r,r?!1:Gt(n,e,t))})}function sn(e,t){return Gt(Ft.statSync(e),e,t)}});var Wt=y((ps,Ht)=>{Ht.exports=Dt;Dt.sync=an;var Bt=require("fs");function Dt(e,t,o){Bt.stat(e,function(r,n){o(r,r?!1:$t(n,t))})}function an(e,t){return $t(Bt.statSync(e),t)}function $t(e,t){return e.isFile()&&cn(e,t)}function cn(e,t){var o=e.mode,r=e.uid,n=e.gid,i=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),s=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),l=parseInt("010",8),c=parseInt("001",8),u=a|l,d=o&c||o&l&&n===s||o&a&&r===i||o&u&&i===0;return d}});var Kt=y((fs,qt)=>{var ms=require("fs"),ve;process.platform==="win32"||global.TESTING_WINDOWS?ve=Vt():ve=Wt();qt.exports=Xe;Xe.sync=ln;function Xe(e,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,n){Xe(e,t||{},function(i,s){i?n(i):r(s)})})}ve(e,t||{},function(r,n){r&&(r.code==="EACCES"||t&&t.ignoreErrors)&&(r=null,n=!1),o(r,n)})}function ln(e,t){try{return ve.sync(e,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var Zt=y((hs,Qt)=>{var oe=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",jt=require("path"),un=oe?";":":",zt=Kt(),Xt=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),Yt=(e,t)=>{let o=t.colon||un,r=e.match(/\//)||oe&&e.match(/\\/)?[""]:[...oe?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],n=oe?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=oe?n.split(o):[""];return oe&&e.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:r,pathExt:i,pathExtExe:n}},Jt=(e,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:r,pathExt:n,pathExtExe:i}=Yt(e,t),s=[],a=c=>new Promise((u,d)=>{if(c===r.length)return t.all&&s.length?u(s):d(Xt(e));let m=r[c],x=/^".*"$/.test(m)?m.slice(1,-1):m,b=jt.join(x,e),v=!x&&/^\.[\\\/]/.test(e)?e.slice(0,2)+b:b;u(l(v,c,0))}),l=(c,u,d)=>new Promise((m,x)=>{if(d===n.length)return m(a(u+1));let b=n[d];zt(c+b,{pathExt:i},(v,$)=>{if(!v&&$)if(t.all)s.push(c+b);else return m(c+b);return m(l(c,u,d+1))})});return o?a(0).then(c=>o(null,c),o):a(0)},dn=(e,t)=>{t=t||{};let{pathEnv:o,pathExt:r,pathExtExe:n}=Yt(e,t),i=[];for(let s=0;s<o.length;s++){let a=o[s],l=/^".*"$/.test(a)?a.slice(1,-1):a,c=jt.join(l,e),u=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+c:c;for(let d=0;d<r.length;d++){let m=u+r[d];try{if(zt.sync(m,{pathExt:n}))if(t.all)i.push(m);else return m}catch{}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw Xt(e)};Qt.exports=Jt;Jt.sync=dn});var to=y((gs,Ye)=>{"use strict";var eo=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"};Ye.exports=eo;Ye.exports.default=eo});var io=y((ws,no)=>{"use strict";var oo=require("path"),pn=Zt(),mn=to();function ro(e,t){let o=e.options.env||process.env,r=process.cwd(),n=e.options.cwd!=null,i=n&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch{}let s;try{s=pn.sync(e.command,{path:o[mn({env:o})],pathExt:t?oo.delimiter:void 0})}catch{}finally{i&&process.chdir(r)}return s&&(s=oo.resolve(n?e.options.cwd:"",s)),s}function fn(e){return ro(e)||ro(e,!0)}no.exports=fn});var so=y((ys,Qe)=>{"use strict";var Je=/([()\][%!^"`<>&|;, *?])/g;function hn(e){return e=e.replace(Je,"^$1"),e}function gn(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(Je,"^$1"),t&&(e=e.replace(Je,"^$1")),e}Qe.exports.command=hn;Qe.exports.argument=gn});var co=y((Ss,ao)=>{"use strict";ao.exports=/^#!(.*)/});var uo=y((Ps,lo)=>{"use strict";var wn=co();lo.exports=(e="")=>{let t=e.match(wn);if(!t)return null;let[o,r]=t[0].replace(/#! ?/,"").split(" "),n=o.split("/").pop();return n==="env"?r:r?`${n} ${r}`:n}});var mo=y((xs,po)=>{"use strict";var Ze=require("fs"),yn=uo();function Sn(e){let o=Buffer.alloc(150),r;try{r=Ze.openSync(e,"r"),Ze.readSync(r,o,0,150,0),Ze.closeSync(r)}catch{}return yn(o.toString())}po.exports=Sn});var wo=y((bs,go)=>{"use strict";var Pn=require("path"),fo=io(),ho=so(),xn=mo(),bn=process.platform==="win32",Cn=/\.(?:com|exe)$/i,In=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function An(e){e.file=fo(e);let t=e.file&&xn(e.file);return t?(e.args.unshift(e.file),e.command=t,fo(e)):e.file}function vn(e){if(!bn)return e;let t=An(e),o=!Cn.test(t);if(e.options.forceShell||o){let r=In.test(t);e.command=Pn.normalize(e.command),e.command=ho.command(e.command),e.args=e.args.map(i=>ho.argument(i,r));let n=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${n}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function En(e,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let r={command:e,args:t,options:o,file:void 0,original:{command:e,args:t}};return o.shell?r:vn(r)}go.exports=En});var Po=y((Cs,So)=>{"use strict";var et=process.platform==="win32";function tt(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function Tn(e,t){if(!et)return;let o=e.emit;e.emit=function(r,n){if(r==="exit"){let i=yo(n,t,"spawn");if(i)return o.call(e,"error",i)}return o.apply(e,arguments)}}function yo(e,t){return et&&e===1&&!t.file?tt(t.original,"spawn"):null}function Rn(e,t){return et&&e===1&&!t.file?tt(t.original,"spawnSync"):null}So.exports={hookChildProcess:Tn,verifyENOENT:yo,verifyENOENTSync:Rn,notFoundError:tt}});var Co=y((Is,re)=>{"use strict";var xo=require("child_process"),ot=wo(),rt=Po();function bo(e,t,o){let r=ot(e,t,o),n=xo.spawn(r.command,r.args,r.options);return rt.hookChildProcess(n,r),n}function On(e,t,o){let r=ot(e,t,o),n=xo.spawnSync(r.command,r.args,r.options);return n.error=n.error||rt.verifyENOENTSync(n.status,r),n}re.exports=bo;re.exports.spawn=bo;re.exports.sync=On;re.exports._parse=ot;re.exports._enoent=rt});var Go=y((Hs,Oe)=>{Oe.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Oe.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Oe.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Do=y((Ws,ae)=>{var f=global.process,J=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};J(f)?(Uo=require("assert"),ie=Go(),Mo=/^win/i.test(f.platform),ye=require("events"),typeof ye!="function"&&(ye=ye.EventEmitter),f.__signal_exit_emitter__?S=f.__signal_exit_emitter__:(S=f.__signal_exit_emitter__=new ye,S.count=0,S.emitted={}),S.infinite||(S.setMaxListeners(1/0),S.infinite=!0),ae.exports=function(e,t){if(!J(global.process))return function(){};Uo.equal(typeof e,"function","a callback must be provided for exit handler"),se===!1&&ct();var o="exit";t&&t.alwaysLast&&(o="afterexit");var r=function(){S.removeListener(o,e),S.listeners("exit").length===0&&S.listeners("afterexit").length===0&&ke()};return S.on(o,e),r},ke=function(){!se||!J(global.process)||(se=!1,ie.forEach(function(t){try{f.removeListener(t,Le[t])}catch{}}),f.emit=_e,f.reallyExit=lt,S.count-=1)},ae.exports.unload=ke,Q=function(t,o,r){S.emitted[t]||(S.emitted[t]=!0,S.emit(t,o,r))},Le={},ie.forEach(function(e){Le[e]=function(){if(!!J(global.process)){var o=f.listeners(e);o.length===S.count&&(ke(),Q("exit",null,e),Q("afterexit",null,e),Mo&&e==="SIGHUP"&&(e="SIGINT"),f.kill(f.pid,e))}}}),ae.exports.signals=function(){return ie},se=!1,ct=function(){se||!J(global.process)||(se=!0,S.count+=1,ie=ie.filter(function(t){try{return f.on(t,Le[t]),!0}catch{return!1}}),f.emit=Bo,f.reallyExit=Vo)},ae.exports.load=ct,lt=f.reallyExit,Vo=function(t){!J(global.process)||(f.exitCode=t||0,Q("exit",f.exitCode,null),Q("afterexit",f.exitCode,null),lt.call(f,f.exitCode))},_e=f.emit,Bo=function(t,o){if(t==="exit"&&J(global.process)){o!==void 0&&(f.exitCode=o);var r=_e.apply(this,arguments);return Q("exit",f.exitCode,null),Q("afterexit",f.exitCode,null),r}else return _e.apply(this,arguments)}):ae.exports=function(){return function(){}};var Uo,ie,Mo,ye,S,ke,Q,Le,se,ct,lt,Vo,_e,Bo});var Jo=y((js,Yo)=>{"use strict";var{PassThrough:ei}=require("stream");Yo.exports=e=>{e={...e};let{array:t}=e,{encoding:o}=e,r=o==="buffer",n=!1;t?n=!(o||r):o=o||"utf8",r&&(o=null);let i=new ei({objectMode:n});o&&i.setEncoding(o);let s=0,a=[];return i.on("data",l=>{a.push(l),n?s=a.length:s+=l.length}),i.getBufferedValue=()=>t?a:r?Buffer.concat(a,s):a.join(""),i.getBufferedLength=()=>s,i}});var Qo=y((zs,Se)=>{"use strict";var{constants:ti}=require("buffer"),oi=require("stream"),{promisify:ri}=require("util"),ni=Jo(),ii=ri(oi.pipeline),Ne=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function ut(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:o}=t,r=ni(t);return await new Promise((n,i)=>{let s=a=>{a&&r.getBufferedLength()<=ti.MAX_LENGTH&&(a.bufferedData=r.getBufferedValue()),i(a)};(async()=>{try{await ii(e,r),n()}catch(a){s(a)}})(),r.on("data",()=>{r.getBufferedLength()>o&&s(new Ne)})}),r.getBufferedValue()}Se.exports=ut;Se.exports.buffer=(e,t)=>ut(e,{...t,encoding:"buffer"});Se.exports.array=(e,t)=>ut(e,{...t,array:!0});Se.exports.MaxBufferError=Ne});var er=y((Xs,Zo)=>{"use strict";var{PassThrough:si}=require("stream");Zo.exports=function(){var e=[],t=new si({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=r,t.on("unpipe",n),Array.prototype.slice.call(arguments).forEach(o),t;function o(i){return Array.isArray(i)?(i.forEach(o),this):(e.push(i),i.once("end",n.bind(null,i)),i.once("error",t.emit.bind(t,"error")),i.pipe(t,{end:!1}),this)}function r(){return e.length==0}function n(i){e=e.filter(function(s){return s!==i}),!e.length&&t.readable&&t.end()}}});var os={};Qr(os,{default:()=>ts});module.exports=Zr(os);var X=require("@raycast/api");var te=require("@raycast/api"),Nt=require("react");var Y=require("@raycast/api"),he=require("react/jsx-runtime"),Ot="```",kt="https://bitwarden.com/help/cli/#download-and-install",en="https://formulae.brew.sh/formula/bitwarden-cli",tn="https://github.com/raycast/extensions/issues/new?assignees=&labels=extension%2Cbug&template=extension_bug_report.yml&title=%5BBitwarden%5D+...",on=e=>`# \u{1F6A8} Something went wrong
${e?`${Ot}
${e}
${Ot}`:`
`}
## Troubleshooting Guide:

1. The [Bitwarden CLI](${kt}) is correctly installed
2. If you did not install the Bitwarden CLI [using Homebrew](${en}), please check that the path of the installation matches the \`Bitwarden CLI Installation Path\` extension setting. 
    - \u{1F4A1} Run the \`which bw\` command to check the CLI installation path.

If you are still experiencing issues, please [open an issue on GitHub](${tn}).
`,rn=e=>(0,he.jsx)(Y.Detail,{markdown:on(e.errorInfo),actions:(0,he.jsxs)(Y.ActionPanel,{children:[(0,he.jsx)(Y.Action.CopyToClipboard,{title:"Copy Homebrew Installation Command",content:"brew install bitwarden-cli"}),(0,he.jsx)(Y.Action.OpenInBrowser,{title:"Open Installation Guide",url:kt})]})}),je=rn;var Lt="https://bitwarden.com",I={PASSWORD_OPTIONS:"bw-generate-password-options",PASSWORD_ONE_TIME_WARNING:"bw-generate-password-warning-accepted",SESSION_TOKEN:"sessionToken",REPROMPT_HASH:"sessionRepromptHash",SERVER_URL:"cliServer",LAST_ACTIVITY_TIME:"lastActivityTime",VAULT_LOCK_REASON:"vaultLockReason"},ze={CLINotFound:"CLINotFound"};var _t=require("react/jsx-runtime"),ge=class extends Nt.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t,o){t.name in ze?(this.setState(r=>({...r,hasError:!0,error:t.message})),(0,te.showToast)(te.Toast.Style.Failure,t.message)):(te.environment.isDevelopment&&this.setState(r=>({...r,hasError:!0,error:t.message})),console.error("Error:",t,o))}render(){try{return this.state.hasError?(0,_t.jsx)(je,{errorInfo:this.state.error}):this.props.children}catch{return(0,_t.jsx)(je,{})}}},Ae=class extends Error{constructor(t){super(t),this.name=ze.CLINotFound}};var D=require("@raycast/api");var P=require("@raycast/api"),U=require("react");var g=require("@raycast/api"),Ve=require("react");var Sr=require("@raycast/api"),W=require("react");var C=require("@raycast/api");var lr=require("node:buffer"),ur=L(require("node:path"),1),gt=L(require("node:child_process"),1),Pe=L(require("node:process"),1),dr=L(Co(),1);function nt(e){let t=typeof e=="string"?`
`:`
`.charCodeAt(),o=typeof e=="string"?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===o&&(e=e.slice(0,-1)),e}var we=L(require("node:process"),1),ne=L(require("node:path"),1),Io=L(require("node:url"),1);function Ee(e={}){let{env:t=process.env,platform:o=process.platform}=e;return o!=="win32"?"PATH":Object.keys(t).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"}function kn(e={}){let{cwd:t=we.default.cwd(),path:o=we.default.env[Ee()],execPath:r=we.default.execPath}=e,n,i=t instanceof URL?Io.default.fileURLToPath(t):t,s=ne.default.resolve(i),a=[];for(;n!==s;)a.push(ne.default.join(s,"node_modules/.bin")),n=s,s=ne.default.resolve(s,"..");return a.push(ne.default.resolve(i,r,"..")),[...a,o].join(ne.default.delimiter)}function Ao({env:e=we.default.env,...t}={}){e={...e};let o=Ee({env:e});return t.path=e[o],e[o]=kn(t),e}var Ln=(e,t,o,r)=>{if(o==="length"||o==="prototype"||o==="arguments"||o==="caller")return;let n=Object.getOwnPropertyDescriptor(e,o),i=Object.getOwnPropertyDescriptor(t,o);!_n(n,i)&&r||Object.defineProperty(e,o,i)},_n=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},Nn=(e,t)=>{let o=Object.getPrototypeOf(t);o!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,o)},Fn=(e,t)=>`/* Wrapped ${e}*/
${t}`,Gn=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Un=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Mn=(e,t,o)=>{let r=o===""?"":`with ${o.trim()}() `,n=Fn.bind(null,r,t.toString());Object.defineProperty(n,"name",Un),Object.defineProperty(e,"toString",{...Gn,value:n})};function it(e,t,{ignoreNonConfigurable:o=!1}={}){let{name:r}=e;for(let n of Reflect.ownKeys(t))Ln(e,t,n,o);return Nn(e,t),Mn(e,t,r),e}var Te=new WeakMap,vo=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let o,r=0,n=e.displayName||e.name||"<anonymous>",i=function(...s){if(Te.set(i,++r),r===1)o=e.apply(this,s),e=null;else if(t.throw===!0)throw new Error(`Function \`${n}\` can only be called once`);return o};return it(i,e),Te.set(i,r),i};vo.callCount=e=>{if(!Te.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return Te.get(e)};var Eo=vo;var _o=require("node:os");var To=function(){let e=Oo-Ro+1;return Array.from({length:e},Vn)},Vn=function(e,t){return{name:`SIGRT${t+1}`,number:Ro+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Ro=34,Oo=64;var Lo=require("node:os");var ko=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var st=function(){let e=To();return[...ko,...e].map(Bn)},Bn=function({name:e,number:t,description:o,action:r,forced:n=!1,standard:i}){let{signals:{[e]:s}}=Lo.constants,a=s!==void 0;return{name:e,number:a?s:t,description:o,supported:a,action:r,forced:n,standard:i}};var Dn=function(){let e=st();return Object.fromEntries(e.map($n))},$n=function({name:e,number:t,description:o,supported:r,action:n,forced:i,standard:s}){return[e,{name:e,number:t,description:o,supported:r,action:n,forced:i,standard:s}]},No=Dn(),Hn=function(){let e=st(),t=64+1,o=Array.from({length:t},(r,n)=>Wn(n,e));return Object.assign({},...o)},Wn=function(e,t){let o=qn(e,t);if(o===void 0)return{};let{name:r,description:n,supported:i,action:s,forced:a,standard:l}=o;return{[e]:{name:r,number:e,description:n,supported:i,action:s,forced:a,standard:l}}},qn=function(e,t){let o=t.find(({name:r})=>_o.constants.signals[r]===e);return o!==void 0?o:t.find(r=>r.number===e)},Ms=Hn();var Kn=({timedOut:e,timeout:t,errorCode:o,signal:r,signalDescription:n,exitCode:i,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":o!==void 0?`failed with ${o}`:r!==void 0?`was killed with ${r} (${n})`:i!==void 0?`failed with exit code ${i}`:"failed",at=({stdout:e,stderr:t,all:o,error:r,signal:n,exitCode:i,command:s,escapedCommand:a,timedOut:l,isCanceled:c,killed:u,parsed:{options:{timeout:d}}})=>{i=i===null?void 0:i,n=n===null?void 0:n;let m=n===void 0?void 0:No[n].description,x=r&&r.code,v=`Command ${Kn({timedOut:l,timeout:d,errorCode:x,signal:n,signalDescription:m,exitCode:i,isCanceled:c})}: ${s}`,$=Object.prototype.toString.call(r)==="[object Error]",p=$?`${v}
${r.message}`:v,h=[p,t,e].filter(Boolean).join(`
`);return $?(r.originalMessage=r.message,r.message=h):r=new Error(h),r.shortMessage=p,r.command=s,r.escapedCommand=a,r.exitCode=i,r.signal=n,r.signalDescription=m,r.stdout=e,r.stderr=t,o!==void 0&&(r.all=o),"bufferedData"in r&&delete r.bufferedData,r.failed=!0,r.timedOut=Boolean(l),r.isCanceled=c,r.killed=u&&!l,r};var Re=["stdin","stdout","stderr"],jn=e=>Re.some(t=>e[t]!==void 0),Fo=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return Re.map(r=>e[r]);if(jn(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Re.map(r=>`\`${r}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,Re.length);return Array.from({length:o},(r,n)=>t[n])};var $o=L(require("node:os"),1),Ho=L(Do(),1),zn=1e3*5,Wo=(e,t="SIGTERM",o={})=>{let r=e(t);return Xn(e,t,o,r),r},Xn=(e,t,o,r)=>{if(!Yn(t,o,r))return;let n=Qn(o),i=setTimeout(()=>{e("SIGKILL")},n);i.unref&&i.unref()},Yn=(e,{forceKillAfterTimeout:t},o)=>Jn(e)&&t!==!1&&o,Jn=e=>e===$o.default.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",Qn=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return zn;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},qo=(e,t)=>{e.kill()&&(t.isCanceled=!0)},Zn=(e,t,o)=>{e.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Ko=(e,{timeout:t,killSignal:o="SIGTERM"},r)=>{if(t===0||t===void 0)return r;let n,i=new Promise((a,l)=>{n=setTimeout(()=>{Zn(e,o,l)},t)}),s=r.finally(()=>{clearTimeout(n)});return Promise.race([i,s])},jo=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},zo=async(e,{cleanup:t,detached:o},r)=>{if(!t||o)return r;let n=(0,Ho.default)(()=>{e.kill()});return r.finally(()=>{n()})};function Xo(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}var mt=L(Qo(),1),tr=L(er(),1),or=(e,t)=>{t!==void 0&&(Xo(t)?t.pipe(e.stdin):e.stdin.end(t))},rr=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let o=(0,tr.default)();return e.stdout&&o.add(e.stdout),e.stderr&&o.add(e.stderr),o},dt=async(e,t)=>{if(!(!e||t===void 0)){e.destroy();try{return await t}catch(o){return o.bufferedData}}},pt=(e,{encoding:t,buffer:o,maxBuffer:r})=>{if(!(!e||!o))return t?(0,mt.default)(e,{encoding:t,maxBuffer:r}):mt.default.buffer(e,{maxBuffer:r})},nr=async({stdout:e,stderr:t,all:o},{encoding:r,buffer:n,maxBuffer:i},s)=>{let a=pt(e,{encoding:r,buffer:n,maxBuffer:i}),l=pt(t,{encoding:r,buffer:n,maxBuffer:i}),c=pt(o,{encoding:r,buffer:n,maxBuffer:i*2});try{return await Promise.all([s,a,l,c])}catch(u){return Promise.all([{error:u,signal:u.signal,timedOut:u.timedOut},dt(e,a),dt(t,l),dt(o,c)])}};var ai=(async()=>{})().constructor.prototype,ci=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(ai,e)]),ft=(e,t)=>{for(let[o,r]of ci){let n=typeof t=="function"?(...i)=>Reflect.apply(r.value,t(),i):r.value.bind(t);Reflect.defineProperty(e,o,{...r,value:n})}return e},ir=e=>new Promise((t,o)=>{e.on("exit",(r,n)=>{t({exitCode:r,signal:n})}),e.on("error",r=>{o(r)}),e.stdin&&e.stdin.on("error",r=>{o(r)})});var sr=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],li=/^[\w.-]+$/,ui=/"/g,di=e=>typeof e!="string"||li.test(e)?e:`"${e.replace(ui,'\\"')}"`,ar=(e,t)=>sr(e,t).join(" "),cr=(e,t)=>sr(e,t).map(o=>di(o)).join(" ");var pi=1e3*1e3*100,mi=({env:e,extendEnv:t,preferLocal:o,localDir:r,execPath:n})=>{let i=t?{...Pe.default.env,...e}:e;return o?Ao({env:i,cwd:r,execPath:n}):i},fi=(e,t,o={})=>{let r=dr.default._parse(e,t,o);return e=r.command,t=r.args,o=r.options,o={maxBuffer:pi,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||Pe.default.cwd(),execPath:Pe.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=mi(o),o.stdio=Fo(o),Pe.default.platform==="win32"&&ur.default.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:o,parsed:r}},ht=(e,t,o)=>typeof t!="string"&&!lr.Buffer.isBuffer(t)?o===void 0?void 0:"":e.stripFinalNewline?nt(t):t;function pr(e,t,o){let r=fi(e,t,o),n=ar(e,t),i=cr(e,t);jo(r.options);let s;try{s=gt.default.spawn(r.file,r.args,r.options)}catch(x){let b=new gt.default.ChildProcess,v=Promise.reject(at({error:x,stdout:"",stderr:"",all:"",command:n,escapedCommand:i,parsed:r,timedOut:!1,isCanceled:!1,killed:!1}));return ft(b,v)}let a=ir(s),l=Ko(s,r.options,a),c=zo(s,r.options,l),u={isCanceled:!1};s.kill=Wo.bind(null,s.kill.bind(s)),s.cancel=qo.bind(null,s,u);let m=Eo(async()=>{let[{error:x,exitCode:b,signal:v,timedOut:$},p,h,N]=await nr(s,r.options,c),me=ht(r.options,p),H=ht(r.options,h),fe=ht(r.options,N);if(x||b!==0||v!==null){let Ce=at({error:x,exitCode:b,signal:v,stdout:me,stderr:H,all:fe,command:n,escapedCommand:i,parsed:r,timedOut:$,isCanceled:u.isCanceled||(r.options.signal?r.options.signal.aborted:!1),killed:s.killed});if(!r.options.reject)return Ce;throw Ce}return{command:n,escapedCommand:i,exitCode:0,stdout:me,stderr:H,all:fe,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return or(s,r.options.input),s.all=rr(s,r.options),ft(s,m)}var gr=require("fs"),wr=require("path/posix");var hi=require("@raycast/api"),fr=require("crypto");var mr="foobarbazzybaz";function hr(e){return Object.entries(e).flatMap(([t,o])=>o?[`--${t}`,o]:[])}async function Fe(e){return new Promise((t,o)=>{(0,fr.pbkdf2)(e,mr,1e5,64,"sha512",(r,n)=>{if(r!=null){o(r);return}t(n.toString("hex"))})})}var xe=require("@raycast/api");function Ge(){let{serverUrl:e}=(0,xe.getPreferenceValues)();return e===""||e==="bitwarden.com"||e==="https://bitwarden.com"?"":e}var gi={search:"transientCopySearch","generate-password":"transientCopyGeneratePassword","generate-password-quick":"transientCopyGeneratePasswordQuick"};function T(e){let t=gi[xe.environment.commandName],o=(0,xe.getPreferenceValues)()[t];return o==="never"?!1:o==="always"?!0:o==="passwords"?e==="password":!0}var Ue=class{constructor(){let{cliPath:t,clientId:o,clientSecret:r,serverCertsPath:n}=(0,C.getPreferenceValues)(),i=Ge();if(this.cliPath=t||(process.arch=="arm64"?"/opt/homebrew/bin/bw":"/usr/local/bin/bw"),!(0,gr.existsSync)(this.cliPath))throw new Ae(`Bitwarden CLI not found at ${this.cliPath}`);this.env={BITWARDENCLI_APPDATA_DIR:C.environment.supportPath,BW_CLIENTSECRET:r.trim(),BW_CLIENTID:o.trim(),PATH:(0,wr.dirname)(process.execPath),...i&&n?{NODE_EXTRA_CA_CERTS:n}:{}},this.initPromise=(async()=>{await this.checkServerUrl(i),this.lockReason=await C.LocalStorage.getItem(I.VAULT_LOCK_REASON)})()}async initialize(){return await this.initPromise,this}async checkServerUrl(t){if((await C.LocalStorage.getItem(I.SERVER_URL)||"")===t)return;let r=await(0,C.showToast)({style:C.Toast.Style.Animated,title:"Switching server...",message:"Bitwarden server preference changed"});try{try{await this.logout()}catch{}await this.exec(["config","server",t||Lt]),await C.LocalStorage.setItem(I.SERVER_URL,t),r.style=C.Toast.Style.Success,r.title="Success",r.message="Bitwarden server changed"}catch(n){r.style=C.Toast.Style.Failure,r.title="Failed to switch server",n instanceof Error?r.message=n.message:r.message="Unknown error occurred"}}async setLockReason(t){this.lockReason=t,await C.LocalStorage.setItem(I.VAULT_LOCK_REASON,t)}async clearLockReason(){this.lockReason&&(await C.LocalStorage.removeItem(I.VAULT_LOCK_REASON),this.lockReason=void 0)}async exec(t,o){let{abortController:r,input:n="",skipLastActivityUpdate:i=!1}=o??{},s=await pr(this.cliPath,t,{env:this.env,input:n,signal:r?.signal});return i||await C.LocalStorage.setItem(I.LAST_ACTIVITY_TIME,new Date().toISOString()),s}async sync(t){await this.exec(["sync","--session",t])}async login(){await this.exec(["login","--apikey"]),await this.clearLockReason()}async logout(){await this.exec(["logout"])}async listItems(t){let{stdout:o}=await this.exec(["list","items","--session",t]);return JSON.parse(o).filter(n=>!!n.name)}async listFolders(t){let{stdout:o}=await this.exec(["list","folders","--session",t]);return JSON.parse(o)}async getTotp(t,o){let{stdout:r}=await this.exec(["get","totp","--session",o,t]);return r}async unlock(t){let{stdout:o}=await this.exec(["unlock",t,"--raw"]);return await this.clearLockReason(),o}async lock(t){t&&this.setLockReason(t),await this.exec(["lock"])}async status(t){let{stdout:o}=await this.exec(t==null?["status"]:["status","--session",t]);return JSON.parse(o)}async generatePassword(t,o){let r=t?hr(t):[],{stdout:n}=await this.exec(["generate",...r],{abortController:o});return n}};var yr=require("react/jsx-runtime"),Pr=(0,W.createContext)(null),xr=e=>{let{children:t}=e,[o,r]=(0,W.useState)();return(0,W.useEffect)(()=>{new Ue().initialize().then(r)},[]),o?(0,yr.jsx)(Pr.Provider,{value:o,children:t}):(0,yr.jsx)(Sr.Detail,{isLoading:!0})},F=()=>{let e=(0,W.useContext)(Pr);if(e==null)throw new Error("useBitwarden must be used within a BitwardenProvider");return e};var G=require("@raycast/api"),Me=require("react");function wi(){let e=F(),[t,o]=(0,Me.useState)(null);(0,Me.useEffect)(()=>{e.status().then(s=>{o(s)})},[]);let r=!!Ge(),n="...",i="...";if(t){let{status:s,userEmail:a,serverUrl:l}=t;n=s=="unauthenticated"?"\u274C Logged out":`\u{1F512} Locked (${a})`,l?i=l||"":(!l&&r||l&&!r)&&(0,G.confirmAlert)({icon:G.Icon.ExclamationMark,title:"Restart Required",message:"Bitwarden server URL preference has been changed since the extension was opened.",primaryAction:{title:"Close Extension"},dismissAction:{title:"Close Raycast",style:G.Alert.ActionStyle.Cancel}}).then(c=>{c?(0,G.popToRoot)():(0,G.closeMainWindow)()})}return{userMessage:n,serverMessage:i,shouldShowServer:r}}var br=wi;var q=require("react/jsx-runtime"),yi=e=>{let{onUnlock:t}=e,o=F(),[r,n]=(0,Ve.useState)(!1),{userMessage:i,serverMessage:s,shouldShowServer:a}=br(),l=(0,Ve.useRef)(o.lockReason).current;async function c({password:u}){if(u.length==0){(0,g.showToast)(g.Toast.Style.Failure,"Failed to unlock vault","Missing password");return}try{n(!0);let d=await(0,g.showToast)(g.Toast.Style.Animated,"Unlocking Vault...","Please wait");if((await o.status()).status=="unauthenticated")try{await o.login()}catch{(0,g.showToast)(g.Toast.Style.Failure,"Failed to unlock vault",`Please check your ${a?"Server URL, ":""}API Key and Secret.`);return}let x=await o.unlock(u),b=await Fe(u);d.hide(),t(x,b)}catch{(0,g.showToast)(g.Toast.Style.Failure,"Failed to unlock vault","Check your credentials")}finally{n(!1)}}return(0,q.jsxs)(g.Form,{actions:(0,q.jsx)(g.ActionPanel,{children:!r&&(0,q.jsx)(g.Action.SubmitForm,{title:"Unlock",onSubmit:c,shortcut:{key:"enter",modifiers:[]}})}),children:[a&&(0,q.jsx)(g.Form.Description,{title:"Server URL",text:s}),(0,q.jsx)(g.Form.Description,{title:"Vault Status",text:i}),l&&(0,q.jsx)(g.Form.Description,{title:"Reason",text:l}),(0,q.jsx)(g.Form.PasswordField,{autoFocus:!0,id:"password",title:"Master Password"})]})},Cr=yi;var wt=require("react/jsx-runtime"),Ir=(0,U.createContext)(null),Si={token:void 0,isLoading:!0,isLocked:!1,isAuthenticated:!1,passwordHash:void 0,lastActivityTime:void 0},ce=class extends Error{constructor(t){super(t),this.name="ShouldLockVaultError"}};function Ar(e){let{unlock:t,children:o}=e,r=F(),[n,i]=(0,U.useReducer)((p,h)=>({...p,...h}),Si),s=!n.isLoading&&n.isAuthenticated&&!n.isLocked;(0,U.useEffect)(()=>{a()},[r]);async function a(){try{let p=+(0,P.getPreferenceValues)().repromptIgnoreDuration,[h,N,me]=await Promise.all([P.LocalStorage.getItem(I.SESSION_TOKEN),P.LocalStorage.getItem(I.REPROMPT_HASH),P.LocalStorage.getItem(I.LAST_ACTIVITY_TIME)]),H;if(!h||!N)throw new ce;if(me&&p>=0){let fe="Vault timed out due to inactivity";if(p===0)throw new ce(fe);H=new Date(me);let Ce=H?Date.now()-H.getTime():0;if(H!=null&&Ce>=p)throw new ce(fe)}await c({token:h,passwordHash:N,lastActivityTime:H})}catch(p){let h=p instanceof ce?p.message:void 0,{status:N}=await r.status();await d(),N!=="unauthenticated"&&await r.lock(h)}}async function l(p,h){if(h==null)return"unauthenticated";try{return await p.listItems(h??""),"unlocked"}catch{return"locked"}}async function c(p){let h={...p};if("token"in p){let N=await l(r,p.token);h={...p,isLoading:!1,isLocked:N==="locked"||N==="unauthenticated",isAuthenticated:N!=="unauthenticated"}}i(h)}async function u(p,h){await Promise.all([P.LocalStorage.setItem(I.SESSION_TOKEN,p),P.LocalStorage.setItem(I.REPROMPT_HASH,h)]),await c({token:p,passwordHash:h})}async function d(){await Promise.all([P.LocalStorage.removeItem(I.SESSION_TOKEN),P.LocalStorage.removeItem(I.REPROMPT_HASH)]),await c({token:void 0,passwordHash:void 0})}async function m(){let p=await(0,P.showToast)({title:"Locking Vault...",style:P.Toast.Style.Animated});await r.lock("Manually locked by the user"),await d(),await p.hide()}async function x(){let p=await(0,P.showToast)({title:"Logging Out...",style:P.Toast.Style.Animated});await r.logout(),await d(),await p.hide()}async function b(p){return await Fe(p)===n.passwordHash}let v=(0,U.useMemo)(()=>({token:n.token,isLoading:n.isLoading,isAuthenticated:n.isAuthenticated,isLocked:n.isLocked,active:s,lock:m,logout:x,confirmMasterPassword:b}),[n,s,m,x,b]);if(n.isLoading)return(0,wt.jsx)(P.Detail,{isLoading:!0});let $=n.isLocked||!n.isAuthenticated;return(0,wt.jsx)(Ir.Provider,{value:v,children:$&&t?(0,wt.jsx)(Cr,{onUnlock:u}):n.token?o:null})}function K(){let e=(0,U.useContext)(Ir);if(e==null)throw new Error("useSession must be used within a SessionProvider");return e}var Z=require("@raycast/api"),M=require("react");var bi=require("react/jsx-runtime"),vr=(0,M.createContext)(null),Pi={items:[],folders:[],isLoading:!0,isLocked:!1},Er=({children:e})=>{let t=K(),o=F(),[r,n]=(0,M.useReducer)((u,d)=>({...u,...d}),Pi),i=r.items.length==0,s=t.isLoading||r.isLoading;(0,M.useEffect)(()=>{!t.active||(t.token?a(t.token):n({isLocked:!0}))},[t.token,t.active]);async function a(u){try{let[d,m]=await Promise.all([o.listFolders(u),o.listItems(u)]);m.sort(xi),n({isLoading:!1,items:m,folders:d})}catch{(0,Z.showToast)(Z.Toast.Style.Failure,"Failed to load vault.")}}async function l(){if(t.token){let u=await(0,Z.showToast)(Z.Toast.Style.Animated,"Syncing Items...");try{await o.sync(t.token),await a(t.token),await u.hide()}catch{await t.logout(),u.style=Z.Toast.Style.Failure,u.message="Failed to sync. Please try logging in again."}}}let c=(0,M.useMemo)(()=>({...r,isEmpty:i,isLoading:s,syncItems:l}),[r,i,s,l]);return(0,bi.jsx)(vr.Provider,{value:c,children:e})};function xi(e,t){return e.favorite&&t.favorite?0:e.favorite?-1:1}var Be=()=>{let e=(0,M.useContext)(vr);if(e==null)throw new Error("useVault must be used within a VaultProvider");return e};var ee=require("react/jsx-runtime");function Ci(){let e=Be(),t=K(),o=()=>t.lock("Manually locked by the user");return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(D.Action,{title:"Sync Vault",shortcut:{modifiers:["cmd"],key:"r"},icon:D.Icon.ArrowClockwise,onAction:e.syncItems}),(0,ee.jsx)(D.Action,{icon:{source:"sf_symbols_lock.svg",tintColor:D.Color.PrimaryText},title:"Lock Vault",shortcut:{modifiers:["cmd","shift"],key:"l"},onAction:o}),(0,ee.jsx)(D.Action,{title:"Logout",icon:D.Icon.XMarkCircle,onAction:t.logout})]})}var be=Ci;var E=require("@raycast/api"),qr=require("react");var z=require("@raycast/api");var Tr=require("react"),yt=require("react/jsx-runtime"),Ii=e=>{let t=Tr.Children.toArray(e.children);return e.reverse&&t.reverse(),(0,yt.jsx)(yt.Fragment,{children:t})},Rr=Ii;var De=require("react"),Or=(0,De.createContext)(null),w=()=>{let e=(0,De.useContext)(Or);if(e==null)throw new Error("useSelectVaultItem must be used within a VaultItemContext.Provider");return e},kr=Or;var de=require("@raycast/api");var Nr=require("@raycast/api");var ue=require("@raycast/api");var j=require("@raycast/api"),le=require("react/jsx-runtime"),Ai=e=>{let{description:t,onConfirm:o}=e;async function r(n){o(n.password)}return(0,le.jsxs)(j.Form,{navigationTitle:"Confirmation Required",actions:(0,le.jsx)(j.ActionPanel,{children:(0,le.jsx)(j.Action.SubmitForm,{title:"Confirm",onSubmit:r,shortcut:{key:"enter",modifiers:[]}})}),children:[(0,le.jsx)(j.Form.Description,{title:"Confirmation Required for",text:t}),(0,le.jsx)(j.Form.PasswordField,{autoFocus:!0,id:"password",title:"Master Password"})]})},Lr=Ai;var Ei=require("react/jsx-runtime");function vi(e,t){let{description:o="Performing an action that requires the master password"}=t??{},r=K(),{push:n,pop:i}=(0,ue.useNavigation)();async function s(a){if(!await r.confirmMasterPassword(a)){await(0,ue.showToast)(ue.Toast.Style.Failure,"Failed to unlock vault","Check your credentials");return}i(),setTimeout(e,1)}return()=>n((0,Ei.jsx)(Lr,{description:o,onConfirm:s}))}var _r=vi;var Ri=require("react/jsx-runtime");function Ti(e){let{repromptDescription:t,onAction:o,...r}=e,{reprompt:n}=w(),i=_r(o,{description:t});return(0,Ri.jsx)(Nr.Action,{...r,onAction:n?i:o})}var R=Ti;var ki=require("react/jsx-runtime");function Oi(){let{login:e,name:t}=w(),o=e?.password;if(!o)return null;let r=async()=>{await de.Clipboard.copy(o,{transient:T("password")}),await(0,de.showHUD)("Copied password to clipboard")};return(0,ki.jsx)(R,{title:"Copy Password",icon:de.Icon.Key,onAction:r,repromptDescription:`Copying the password of <${t}>`})}var St=Oi;var $e=require("@raycast/api");var _i=require("react/jsx-runtime");function Li(){let{login:e,name:t}=w(),o=e?.password;if(!o)return null;let r=async()=>{await $e.Clipboard.paste(o)};return(0,_i.jsx)(R,{title:"Paste Password",icon:$e.Icon.Key,onAction:r,repromptDescription:`Pasting the password of <${t}>`})}var Pt=Li;var O=require("@raycast/api");var Fi=require("react/jsx-runtime");function Ni(){let{id:e,name:t,login:o}=w(),r=F(),n=K();if(!o?.totp)return null;let s=async()=>{if(n.token){let a=await(0,O.showToast)(O.Toast.Style.Success,"Copying TOTP Code..."),l=await r.getTotp(e,n.token);await O.Clipboard.copy(l,{transient:T("other")}),await a.hide(),await(0,O.closeMainWindow)({clearRootSearch:!0})}else(0,O.showToast)(O.Toast.Style.Failure,"Failed to fetch TOTP.")};return(0,Fi.jsx)(R,{title:"Copy TOTP",icon:O.Icon.Clipboard,onAction:s,shortcut:{modifiers:["cmd"],key:"t"},repromptDescription:`Copying the TOTP of <${t}>`})}var xt=Ni;var V=require("@raycast/api");var Fr=e=>e.charAt(0).toUpperCase()+e.slice(1);function Gr(e){return"```\n"+e+"\n```"}var He=require("react/jsx-runtime");function Gi(){let{notes:e,name:t}=w(),{push:o}=(0,V.useNavigation)();if(!e)return null;let r=()=>{o((0,He.jsx)(V.Detail,{markdown:Gr(e),actions:(0,He.jsx)(V.ActionPanel,{children:(0,He.jsx)(V.Action.CopyToClipboard,{title:"Copy Secure Note",content:e,transient:T("other")})})}))};return(0,He.jsx)(R,{title:"Show Secure Note",icon:V.Icon.BlankDocument,onAction:r,repromptDescription:`Showing the note of <${t}>`})}var bt=Gi;var We=require("@raycast/api");var Mi=require("react/jsx-runtime");function Ui(){let{login:e}=w(),t=e?.username;return t?(0,Mi.jsx)(We.Action.CopyToClipboard,{title:"Copy Username",icon:We.Icon.Person,content:t,shortcut:{modifiers:["cmd"],key:"u"},transient:T("other")}):null}var Ct=Ui;var _=require("@raycast/api");var pe=require("react/jsx-runtime");function Vi(){let{login:e,notes:t,card:o,identity:r,fields:n,name:i}=w(),s=Object.fromEntries(n?.map(c=>[c.name,c.value])||[]),a=Object.fromEntries(e?.uris?.filter(c=>c.uri).map((c,u)=>[`URI ${u+1}`,c.uri])||[]),l=c=>async()=>{await _.Clipboard.copy(c,{transient:T("other")}),await(0,_.showHUD)("Copied to Clipboard"),await(0,_.closeMainWindow)()};return(0,pe.jsxs)(pe.Fragment,{children:[Object.entries(a).map(([c,u],d)=>u?(0,pe.jsx)(_.Action.CopyToClipboard,{title:`Copy ${c}`,icon:_.Icon.Clipboard,content:u,transient:T("other")},`${d}-${c}`):null),Object.entries({notes:t,...o,...r,...s}).map(([c,u],d)=>{if(!u)return null;let m=Fr(c);return(0,pe.jsx)(R,{title:`Copy ${m}`,icon:_.Icon.Clipboard,onAction:l(u),repromptDescription:`Copying the ${m} of <${i}>`},`${d}-${c}`)})]})}var It=Vi;var qe=require("@raycast/api");var Di=require("react/jsx-runtime");function Bi(){let{login:e}=w(),t=e?.uris?.[0]?.uri;return t?(0,Di.jsx)(qe.Action.OpenInBrowser,{title:"Open in Browser",url:t,icon:qe.Icon.Globe,shortcut:{modifiers:["cmd"],key:"o"}}):null}var At=Bi;var B=require("@raycast/api");var $i={1:"01 - January",2:"02 - February",3:"03 - March",4:"04 - April",5:"05 - May",6:"06 - June",7:"07 - July",8:"08 - August",9:"09 - September",10:"10 - October",11:"11 - November",12:"12 - December"},Hi={expMonth:e=>$i[e]},Ur={cardholderName:"Cardholder name",number:"Number",code:"Security code (CVV)",expMonth:"Expiration month",expYear:"Expiration year",brand:"Brand"},Mr=(e,t)=>Hi[e]?.(t)??t;function Vr(e){return`# \u{1F4B3} Card Details
---
${Object.entries(e).map(([t,o])=>o?`- **${Ur[t]}**: ${Mr(t,o)}`:null).join(`
`)}
`}function Br(e){return Object.entries(e).map(([t,o])=>o?`${Ur[t]}: ${Mr(t,o)}`:null).filter(Boolean).join(`
`)}var Ke=require("react/jsx-runtime");function Wi(){let{push:e}=(0,B.useNavigation)(),{card:t,name:o}=w();if(!t)return null;let r=()=>{e((0,Ke.jsx)(B.Detail,{markdown:Vr(t),actions:(0,Ke.jsx)(B.ActionPanel,{children:(0,Ke.jsx)(B.Action.CopyToClipboard,{title:"Copy Card Details",content:Br(t),transient:T("other")})})}))};return(0,Ke.jsx)(R,{title:"Show Card Details",icon:B.Icon.CreditCard,onAction:r,repromptDescription:`Showing the card details of <${o}>`})}var vt=Wi;var A=require("react/jsx-runtime"),{primaryAction:qi}=(0,z.getPreferenceValues)(),Ki=()=>{let{login:e,card:t}=w();return(0,A.jsxs)(z.ActionPanel,{children:[!!e&&(0,A.jsxs)(z.ActionPanel.Section,{children:[(0,A.jsxs)(Rr,{reverse:qi==="copy",children:[(0,A.jsx)(Pt,{}),(0,A.jsx)(St,{})]}),(0,A.jsx)(xt,{}),(0,A.jsx)(Ct,{}),(0,A.jsx)(At,{})]}),!!t&&(0,A.jsxs)(z.ActionPanel.Section,{children:[(0,A.jsx)(vt,{}),(0,A.jsx)(bt,{})]}),(0,A.jsx)(z.ActionPanel.Section,{children:(0,A.jsx)(It,{})}),(0,A.jsx)(z.ActionPanel.Section,{children:(0,A.jsx)(be,{})})]})},Dr=Ki;var $r=require("@raycast/api"),Et=require("url");function Hr(e){let t=[e.name];if(e.card){let{brand:r,number:n}=e.card;if(t.push(r),n!==null){let i=/^3[47]/.test(n);t.push(n.substring(n.length-(i?5:4),n.length))}}if(t.push(e.login?.username),e.login?.uris){for(let r of e.login.uris)if(r.uri!==null)try{t.push(...new Et.URL(r.uri).hostname.split("."))}catch{}}return[...new Set(t.filter(r=>!!r))]}function Wr(e){try{return`https://icons.bitwarden.net/${new Et.URL(e).hostname}/icon.png`}catch{return $r.Icon.Globe}}var Tt=require("react/jsx-runtime"),{fetchFavicons:ji}=(0,E.getPreferenceValues)(),zi=e=>{let{item:t,folder:o}=e,r=(0,qr.useMemo)(()=>Hr(t),[t]);return(0,Tt.jsx)(kr.Provider,{value:t,children:(0,Tt.jsx)(E.List.Item,{id:t.id,title:t.name,keywords:r,accessories:Ji(t,o),icon:Yi(t),subtitle:t.login?.username||void 0,actions:(0,Tt.jsx)(Dr,{})})})},Xi={1:E.Icon.Globe,2:E.Icon.BlankDocument,3:E.Icon.List,4:E.Icon.Person};function Yi(e){let t=e.login?.uris?.[0]?.uri;return ji&&t?Wr(t):Xi[e.type]}function Ji(e,t){let o=[];return t?.id&&o.push({icon:{source:E.Icon.Folder,tintColor:E.Color.SecondaryText},tooltip:"Folder",text:t.name}),e.favorite&&o.push({icon:{source:E.Icon.Star,tintColor:E.Color.Yellow},tooltip:"Favorite"}),o}var Kr=zi;var k=require("react/jsx-runtime"),Qi=()=>(0,k.jsx)(ge,{children:(0,k.jsx)(xr,{children:(0,k.jsx)(Ar,{unlock:!0,children:(0,k.jsx)(Er,{children:(0,k.jsx)(Zi,{})})})})});function Zi(){let{items:e,folders:t,isLoading:o,isEmpty:r}=Be();return(0,k.jsxs)(X.List,{isLoading:o,children:[e.map(n=>(0,k.jsx)(Kr,{item:n,folder:es(t,n)},n.id)),o?(0,k.jsx)(X.List.EmptyView,{icon:X.Icon.ArrowClockwise,title:"Loading...",description:"Please wait."}):(0,k.jsx)(X.List.EmptyView,{icon:{source:"bitwarden-64.png"},title:r?"Vault empty.":"No matching items found.",description:r?"Hit the sync button to sync your vault or try logging in again.":"Hit the sync button to sync your vault.",actions:!o&&(0,k.jsx)(X.ActionPanel,{children:(0,k.jsx)(be,{})})})]})}function es(e,t){return e.find(o=>o.id===t.folderId)}var ts=Qi;0&&(module.exports={});
